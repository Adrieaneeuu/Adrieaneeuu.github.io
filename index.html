<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ“‚ Index general (fÄƒrÄƒ schimbare de URL)</title>
  <style>
    body {
      background: #0d1117; color: #e6edf3;
      font-family: "Segoe UI", sans-serif;
      padding: 30px; max-width: 1000px; margin: auto;
    }
    h1 { color: #ff4d4d; font-size: 1.8rem; margin-bottom: 5px; }
    p.desc { color: #8b949e; margin-bottom: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 10px; border-bottom: 1px solid #30363d; text-align: left; }
    th { color: #aaa; }
    a { color: #58a6ff; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .folder { color: #ffa657; }
    .file { color: #9cdcfe; }
    button {
      background: #21262d; color: #fff;
      border: 1px solid #30363d; border-radius: 6px;
      padding: 5px 10px; cursor: pointer;
    }
    button:hover { background: #30363d; }
    select { background:#161b22; color:#e6edf3; border:1px solid #30363d; border-radius:6px; padding:5px 8px; }
  </style>
</head>
<body>
<h1>ğŸ“‚ Index general al fiÈ™ierelor site-ului</h1>
<p class="desc">
RÄƒmÃ¢ne tot timpul la <code>https://adrieaneeuu.github.io</code>.  
PoÈ›i alege un director din listÄƒ, dar nu se schimbÄƒ URL-ul.
</p>

<label for="folderSelect">Alege director:</label>
<select id="folderSelect"></select>

<table>
  <thead><tr><th>Nume</th><th>Tip</th><th>MÄƒrime</th><th>AcÈ›iune</th></tr></thead>
  <tbody id="list"><tr><td colspan="4">Se Ã®ncarcÄƒ...</td></tr></tbody>
</table>

<script>
(async()=>{
  const owner="Adrieaneeuu";
  const repo="Adrieaneeuu.github.io";
  const branch="main";
  const siteBase="https://adrieaneeuu.github.io";

  const folderSelect=document.getElementById("folderSelect");
  const list=document.getElementById("list");

  // ğŸ”¹ obÈ›ine structura repo-ului (doar directoarele principale)
  const rootRes=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents?ref=${branch}`);
  const rootData=await rootRes.json();
  const dirs=rootData.filter(f=>f.type==="dir");
  dirs.unshift({name:"(rÄƒdÄƒcinÄƒ)", path:""});

  for(const d of dirs){
    const opt=document.createElement("option");
    opt.value=d.path;
    opt.textContent=d.name;
    folderSelect.appendChild(opt);
  }

  folderSelect.onchange=()=>loadDir(folderSelect.value);
  loadDir("");

  async function loadDir(path){
    list.innerHTML="<tr><td colspan='4'>Se Ã®ncarcÄƒ...</td></tr>";
    const res=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`);
    if(!res.ok){list.innerHTML=`<tr><td colspan='4'>Eroare ${res.status}</td></tr>`;return;}
    const files=await res.json();
    files.sort((a,b)=>a.type.localeCompare(b.type)||a.name.localeCompare(b.name));
    list.innerHTML="";

    for(const f of files){
      const tr=document.createElement("tr");

      const tdName=document.createElement("td");
      const link=document.createElement("a");
      link.textContent=f.name;
      link.className=f.type==="dir"?"folder":"file";
      if(f.type==="file"){
        link.href=`${siteBase}/${f.path}`;
        if(!f.name.endsWith(".html")) link.download=f.name;
      } else {
        link.href="#";
        link.onclick=(e)=>{e.preventDefault();loadDir(f.path);}
      }
      tdName.appendChild(link);

      const tdType=document.createElement("td");
      tdType.textContent=f.type==="dir"?"Director":"FiÈ™ier";

      const tdSize=document.createElement("td");
      tdSize.textContent=f.size?Math.round(f.size/1024)+" KB":"-";

      const tdAction=document.createElement("td");
      if(f.type==="file"){
        const btn=document.createElement("button");
        if(f.name.endsWith(".html")){
          btn.textContent="Deschide";
          btn.onclick=()=>window.open(`${siteBase}/${f.path}`,"_blank");
        }else{
          btn.textContent="DescarcÄƒ";
          btn.onclick=()=>window.open(`${siteBase}/${f.path}`,"_blank");
        }
        tdAction.appendChild(btn);
      } else {
        tdAction.textContent="ğŸ“";
      }

      tr.append(tdName,tdType,tdSize,tdAction);
      list.appendChild(tr);
    }
  }
})();
</script>
</body>
</html>
