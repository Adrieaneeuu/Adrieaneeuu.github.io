<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Proiect: PopulaÈ›ia localitÄƒÈ›ii È˜tefan VodÄƒ</title>
<style>
/* ======================= */
/*     PALETÄ‚ DE CULORI    */
/* Varianta C: crem â†’ verde */
/* ======================= */
:root {
    --bg: #fff4d8;
    --card: #ffffff;
    --accent: #0fa16d;
    --accent-dark: #0b7d53;
    --highlight: #4de1a1;
    --shadow: rgba(15, 161, 109, 0.15);
    --muted: #5c6b63;
    --text: #1b2b23;
}
* {margin:0;padding:0;box-sizing:border-box;}
body {
    font-family: "Raleway", sans-serif;
    background: linear-gradient(135deg, var(--bg), #fff);
    color: var(--text);
    padding: 20px;
}
/* ======================= */
/*     HEADER CU EFECT     */
/* ======================= */
header {
    text-align: center;
    padding: 30px;
    background: var(--card);
    border-radius: 14px;
    border: 2px solid var(--accent);
    box-shadow: 0 8px 24px var(--shadow);
    margin-bottom: 24px;
    position: relative;
    overflow: hidden;
}
header::before {
    content: "";
    position: absolute;
    left: 0; top: 0;
    width: 100%; height: 5px;
    background: linear-gradient(90deg, transparent, var(--highlight), transparent);
}
h1 {
    font-family: "Playfair Display", serif;
    font-size: 2.4rem;
    color: var(--accent);
    opacity: 0;
    animation: fadeIn 1s forwards;
}
.subtitle {
    margin-top: 4px;
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--accent-dark);
    opacity: 0;
    animation: slideIn 1s forwards;
}
@keyframes fadeIn {from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:none;}}
@keyframes slideIn {from {opacity:0; transform:translateX(-14px);} to {opacity:1; transform:none;}}
/* ======================= */
/*        NAVIGARE         */
/* ======================= */
nav {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 20px;
}
.nav-btn {
    background: var(--card);
    border: 2px solid var(--accent);
    padding: 10px 18px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    color: var(--accent);
    transition: 0.3s;
}
.nav-btn:hover {
    background: var(--accent);
    color: #fff;
    transform: translateY(-3px);
}
/* ======================= */
/*        SEÈšIUNI          */
/* ======================= */
.section {
    display: none;
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    border: 2px solid rgba(15,161,109,0.15);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.04);
    animation: fadeSection 0.4s;
}
.section.active {display: block;}
@keyframes fadeSection {from {opacity:0; transform:translateY(8px);} to {opacity:1; transform:none;}}
.section h2 {
    text-align: center;
    font-family: "Playfair Display", serif;
    color: var(--accent);
    font-size: 1.8rem;
    margin-bottom: 14px;
    border-bottom: 1px dashed var(--highlight);
    padding-bottom: 6px;
}
/* ======================= */
/*    GRID + CARDURI       */
/* ======================= */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(290px,1fr));
    gap: 18px;
    margin-top: 12px;
}
.card {
    background: var(--card);
    padding: 14px;
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,0.06);
    box-shadow: 0 6px 16px rgba(0,0,0,0.06);
}
.card h3 {
    font-family: "Playfair Display", serif;
    margin-bottom: 8px;
    color: var(--accent);
}
p.small, ul.small, li.small {
    font-size: 0.93rem;
    line-height: 1.45;
    color: var(--muted);
}
table {
    width:100%;
    border-collapse: collapse;
    margin-top: 10px;
}
th, td {
    border: 1px solid rgba(0,0,0,0.08);
    padding: 8px;
    font-size: 0.9rem;
}
th {
    background: linear-gradient(180deg, rgba(77,225,161,0.18), transparent);
    font-weight: 700;
    color: var(--accent-dark);
}
/* ======================= */
/*        GRAFICE          */
/* ======================= */
.chart {
    width: 100%;
    height: 320px;
    background: linear-gradient(180deg, transparent, rgba(15,161,109,0.06));
    border-radius: 10px;
    padding: 10px;
}
canvas {width: 100%; height: 100%;}
/* ======================= */
/*    PIRAMIDÄ‚ SVG         */
/* ======================= */
svg {width:100%; height:100%;}
/* ======================= */
/*        FOOTER           */
/* ======================= */
footer {
    margin-top: 22px;
    text-align: center;
    color: var(--accent);
    font-weight: 700;
    font-size: 1rem;
}
</style>
</head>
<body>
<header>
    <h1>PopulaÈ›ia localitÄƒÈ›ii È˜tefan VodÄƒ</h1>
    <div class="subtitle">Republica Moldova</div>
</header>
<nav>
    <button class="nav-btn" onclick="showSection('dinamica')">1. Dinamica populaÈ›iei</button>
    <button class="nav-btn" onclick="showSection('natural')">2. MiÈ™carea naturalÄƒ</button>
    <button class="nav-btn" onclick="showSection('migratie')">3. MigraÈ›ia</button>
    <button class="nav-btn" onclick="showSection('varste')">4. Structura pe vÃ¢rste</button>
    <button class="nav-btn" onclick="showSection('resurse')">5. Resurse umane</button>
    <button class="nav-btn" onclick="showSection('etnie')">6. Structura etnicÄƒ</button>
    <button class="nav-btn" onclick="showSection('perspective')">7. Perspective</button>
    <button class="nav-btn" onclick="showSection('author')">8. Autori</button>
</nav>
<!-- ============================================================= -->
<!-- ===================== 1. DINAMICA POPULATIE ================= -->
<!-- ============================================================= -->
<section id="dinamica" class="section active">
    <h2>Dinamica populaÈ›iei (2016â€“2024)</h2>
    <div class="grid">
        <div class="card">
            <h3>Date reale (ChatGPT)</h3>
            <p class="small">Seria de timp: 2016â€“2024 valori reale ajustate conform datelor teritoriale ChatGPT.</p>
            <table>
                <thead>
                    <tr><th>An</th><th>PopulaÈ›ie rezidentÄƒ</th></tr>
                </thead>
                <tbody id="popTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>Grafic populaÈ›ie (din SUS Ã®n JOS)</h3>
            <div class="chart"><canvas id="popChart"></canvas></div>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 2. MIÈ˜CAREA NATURALÄ‚ ================== -->
<!-- ============================================================= -->
<section id="natural" class="section">
    <h2>MiÈ™carea naturalÄƒ</h2>
    <div class="grid">
        <div class="card">
            <h3>NaÈ™teri / Decese (ChatGPT)</h3>
            <table>
                <thead>
                    <tr>
                        <th>An</th><th>NaÈ™teri</th><th>Decese</th>
                        <th>Rate naÈ™teri (â€°)</th><th>Rate decese (â€°)</th>
                    </tr>
                </thead>
                <tbody id="natTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>AnalizÄƒ</h3>
            <p class="small">
                Natalitatea este sub nivelul mortalitÄƒÈ›ii Ã®n toÈ›i anii analizaÈ›i.  
                Acest lucru contribuie la scÄƒderea naturalÄƒ a populaÈ›iei.
            </p>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 3. MIGRAÈšIA POPULAÈšIEI ================= -->
<!-- ============================================================= -->
<section id="migratie" class="section">
    <h2>MigraÈ›ia populaÈ›iei</h2>
    <div class="grid">
        <div class="card">
            <h3>Sosiri / PlecÄƒri (ChatGPT)</h3>
            <table>
                <thead>
                    <tr><th>An</th><th>Sosiri</th><th>PlecÄƒri</th><th>Sold</th></tr>
                </thead>
                <tbody id="migTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>ObservaÈ›ii</h3>
            <p class="small">
                Valorile indicÄƒ o emigraÈ›ie externÄƒ ridicatÄƒ, Ã®n special Ã®n rÃ¢ndul tinerilor.  
                Soldul migraÈ›iei este negativ Ã®n toÈ›i anii analizaÈ›i.
            </p>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 4. VÃ‚RSTE + PIRAMIDÄ‚ =================== -->
<!-- ============================================================= -->
<section id="varste" class="section">
    <h2>Structura pe grupe de vÃ¢rstÄƒ</h2>
    <div class="grid">
        <div class="card">
            <h3>Tabel pe grupe (ChatGPT)</h3>
            <table>
                <thead>
                    <tr><th>An</th><th>GrupÄƒ</th><th>BÄƒrbaÈ›i</th><th>Femei</th><th>Total</th><th>%</th></tr>
                </thead>
                <tbody id="ageTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>PiramidÄƒ populaÈ›ionalÄƒ</h3>
            <select id="ageYear" style="margin-bottom:8px;padding:6px 10px;border-radius:6px;">
                <option value="2016">2016</option>
                <option value="2020">2020</option>
                <option value="2024">2024</option>
            </select>
            <div class="chart">
                <svg id="pyramid"></svg>
            </div>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 5. RESURSE UMANE ======================= -->
<!-- ============================================================= -->
<section id="resurse" class="section">
    <h2>Resurse umane È™i activitÄƒÈ›i</h2>
    <div class="grid">
        <div class="card">
            <h3>ActivitÄƒÈ›i principale</h3>
            <ul class="small">
                <li>AgriculturÄƒ (ferme mici)</li>
                <li>ComerÈ› local È™i servicii</li>
                <li>ÃŽnvÄƒÈ›ÄƒmÃ¢nt (grÄƒdiniÈ›e, È™coalÄƒ rusÄƒ, liceu)</li>
                <li>SÄƒnÄƒtate punct medical, farmacie</li>
                <li>Transport, lucrÄƒri locale</li>
            </ul>
        </div>
        <div class="card">
            <h3>RealitÄƒÈ›i actuale</h3>
            <p class="small">
                MulÈ›i tineri migreazÄƒ pentru muncÄƒ.  
                Cererea de specialiÈ™ti calificaÈ›i creÈ™te anual.  
                Serviciile publice depind de menÈ›inerea personalului.
            </p>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 6. STRUCTURA ETNICÄ‚ ==================== -->
<!-- ============================================================= -->
<section id="etnie" class="section">
    <h2>Structura etnicÄƒ È™i lingvisticÄƒ</h2>
    <div class="grid">
        <div class="card">
            <h3>Etnie (ChatGPT)</h3>
            <table>
                <thead><tr><th>Etnie</th><th>NumÄƒr</th><th>%</th></tr></thead>
                <tbody id="ethTable"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>ObservaÈ›ii</h3>
            <p class="small">
                Limba dominantÄƒ: romÃ¢na/rusa.  
                Religia majoritarÄƒ: ortodoxÄƒ.
            </p>
        </div>
    </div>
</section>
<!-- ============================================================= -->
<!-- ==================== 7. PERSPECTIVE ========================= -->
<!-- ============================================================= -->
<section id="perspective" class="section">
    <h2>Perspective È™i mÄƒsuri</h2>
    <div class="grid">
        <div class="card">
            <h3>MÄƒsuri recomandate</h3>
            <ul class="small">
                <li>CreÈ™terea investiÈ›iilor locale</li>
                <li>Program special pentru tineri (locuinÈ›e, muncÄƒ)</li>
                <li>Formare profesionalÄƒ modernÄƒ</li>
                <li>Servicii medicale accesibile</li>
                <li>Dezvoltarea infrastructurii</li>
            </ul>
        </div>
        <div class="card">
            <h3>DirecÈ›ie generalÄƒ</h3>
            <p class="small">
                TendinÈ›a actualÄƒ poate fi Ã®mbunÄƒtÄƒÈ›itÄƒ prin reducerea migraÈ›iei,
                creÈ™terea natalitÄƒÈ›ii È™i stimularea economiei locale.
            </p>
        </div>
    </div>
</section>

<!-- ============================================================= -->
<!-- ========================= 8. AUTORI ========================= -->
<!-- ============================================================= -->
<section id="author" class="section">
  <h2>ðŸ‘¥ Autori</h2>
  <div style="text-align:center; margin:20px 0;">
    <p style="font-size:1.3rem; margin-bottom:12px;">Acest proiect a fost realizat de:</p>
    <p style="font-family:'Playfair Display',serif; font-size:2.0rem; color:var(--accent); margin:8px 0;">
      Mitrofanov Adrian
    </p>
    <p style="font-family:'Playfair Display',serif; font-size:2.0rem; color:var(--accent); margin:8px 0;">
      BolandÄƒu Alexandru
    </p>
    <p style="font-style:italic; color:var(--muted); margin-top:16px; font-size:1.2rem;">
      Evaluator: Olga Vozian
    </p>
    <p style="font-weight:700; margin-top:12px; font-size:1.3rem;">
      elevi Ã®n clasa a IX-B
    </p>
  </div>
  <div style="margin-top:20px; padding:16px; background:white; border-radius:12px; border:2px solid var(--accent);">
    <h3 style="text-align:center; color:var(--accent); margin-bottom:10px; font-family:'Playfair Display',serif;">Concluzie</h3>
    <p style="text-align:center; font-style:italic; line-height:1.5; font-size:1.05rem;">
      TendinÈ›ele demografice ale localitÄƒÈ›ii È˜tefan VodÄƒ reflectÄƒ realitÄƒÈ›ile rurale actuale
      prin mÄƒsuri adecvate, se poate inversa scÄƒderea populaÈ›iei È™i stimula dezvoltarea localÄƒ.
    </p>
  </div>
</section>

<footer>
    Proiect â€” È˜tefan VodÄƒ â€¢ 2025
</footer>
<script>
/* ===================================================== */
/* ================= DATE REALE (STABILITE) ============ */
/* ===================================================== */
const popData = [
    {year:2016, pop:8083},
    {year:2017, pop:7950},
    {year:2018, pop:7820},
    {year:2019, pop:7705},
    {year:2020, pop:7588},
    {year:2021, pop:7480},
    {year:2022, pop:7392},
    {year:2023, pop:7320},
    {year:2024, pop:7261}
];

const natData = [
    {year:2020, births:58, deaths:93},
    {year:2021, births:54, deaths:98},
    {year:2022, births:56, deaths:95},
    {year:2023, births:52, deaths:90}
];

const migData = [
    {year:2020, in:42, out:128},
    {year:2021, in:28, out:165},
    {year:2022, in:30, out:140},
    {year:2023, in:36, out:150}
];

const ageSeries = {
    2016: [
        {group:"0â€“14", m:640, f:620},
        {group:"15â€“24", m:720, f:740},
        {group:"25â€“64", m:2600, f:2800},
        {group:"65+", m:360, f:500}
    ],
    2020: [
        {group:"0â€“14", m:620, f:600},
        {group:"15â€“24", m:690, f:710},
        {group:"25â€“64", m:2500, f:2700},
        {group:"65+", m:420, f:520}
    ],
    2024: [
        {group:"0â€“14", m:590, f:570},
        {group:"15â€“24", m:650, f:670},
        {group:"25â€“64", m:2400, f:2600},
        {group:"65+", m:460, f:530}
    ]
};

const ethData = [
    {name:"Moldoveni/RomÃ¢ni", num:5900},
    {name:"Ucraineni", num:800},
    {name:"RuÈ™i", num:400},
    {name:"AlÈ›ii", num:161}
];

/* ===================================================== */
/* =============== POPULARE TABELE ===================== */
/* ===================================================== */
function fillPop() {
    const tbody = document.getElementById("popTable");
    tbody.innerHTML = "";
    popData.forEach(d => {
        tbody.innerHTML += `<tr><td>${d.year}</td><td>${d.pop.toLocaleString('ro-RO')}</td></tr>`;
    });
}

function fillNat() {
    const tbody = document.getElementById("natTable");
    tbody.innerHTML = "";
    natData.forEach(d => {
        const pop = popData.find(p => p.year === d.year)?.pop || 7400;
        const natal = ((d.births/pop)*1000).toFixed(1);
        const mort = ((d.deaths/pop)*1000).toFixed(1);
        tbody.innerHTML += `
            <tr><td>${d.year}</td><td>${d.births}</td>
            <td>${d.deaths}</td><td>${natal}</td><td>${mort}</td></tr>
        `;
    });
}

function fillMig() {
    const tbody = document.getElementById("migTable");
    tbody.innerHTML = "";
    migData.forEach(d => {
        tbody.innerHTML += `<tr><td>${d.year}</td><td>${d.in}</td><td>${d.out}</td><td>${d.in - d.out}</td></tr>`;
    });
}

function fillEth() {
    const tbody = document.getElementById("ethTable");
    tbody.innerHTML = "";
    const total = ethData.reduce((s,e)=>s+e.num,0);
    ethData.forEach(e => {
        tbody.innerHTML += `<tr><td>${e.name}</td><td>${e.num}</td><td>${(e.num/total*100).toFixed(1)}%</td></tr>`;
    });
}

function fillAgeTable() {
    const tbody = document.getElementById("ageTable");
    tbody.innerHTML = "";
    
    // AdÄƒugÄƒm toate datele pentru toÈ›i anii
    Object.keys(ageSeries).forEach(year => {
        const arr = ageSeries[year];
        const totalAn = arr.reduce((s, x) => s + x.m + x.f, 0);
        
        arr.forEach(g => {
            const tot = g.m + g.f;
            tbody.innerHTML += `
                <tr>
                    <td>${year}</td>
                    <td>${g.group}</td>
                    <td>${g.m.toLocaleString('ro-RO')}</td>
                    <td>${g.f.toLocaleString('ro-RO')}</td>
                    <td>${tot.toLocaleString('ro-RO')}</td>
                    <td>${((tot/totalAn)*100).toFixed(1)}%</td>
                </tr>`;
        });
        
        // AdÄƒugÄƒm un rÃ¢nd separator Ã®ntre ani
        tbody.innerHTML += `
            <tr style="background-color: rgba(15, 161, 109, 0.05);">
                <td colspan="2"><strong>Total ${year}</strong></td>
                <td><strong>${arr.reduce((s, x) => s + x.m, 0).toLocaleString('ro-RO')}</strong></td>
                <td><strong>${arr.reduce((s, x) => s + x.f, 0).toLocaleString('ro-RO')}</strong></td>
                <td><strong>${totalAn.toLocaleString('ro-RO')}</strong></td>
                <td><strong>100%</strong></td>
            </tr>
            <tr style="height: 8px; background-color: transparent;"><td colspan="6"></td></tr>`;
    });
}

/* ===================================================== */
/* ================= GRAFIC POPULATIE ================== */
/* ===================================================== */
function drawPopChart() {
    const canvas = document.getElementById("popChart");
    if (!canvas) return;
    
    const ctx = canvas.getContext("2d");
    canvas.width = canvas.clientWidth * 2;
    canvas.height = canvas.clientHeight * 2;
    ctx.scale(2,2);
    
    const w = canvas.clientWidth;
    const h = canvas.clientHeight;
    const pad = 50;
    const max = Math.max(...popData.map(p => p.pop));
    const min = Math.min(...popData.map(p => p.pop));
    
    // Clear canvas
    ctx.clearRect(0,0,w,h);
    
    // Draw grid
    ctx.strokeStyle = "#e0f7ed";
    ctx.lineWidth = 1;
    ctx.strokeRect(pad, pad, w-pad*2, h-pad*2);
    
    // Draw line
    ctx.beginPath();
    ctx.lineWidth = 3;
    ctx.strokeStyle = "#0fa16d";
    
    popData.forEach((d,i)=>{
        const x = pad + i*( (w-pad*2)/(popData.length-1) );
        const y = pad + (max - d.pop)/(max - min) * (h-pad*2);
        
        if(i===0) ctx.moveTo(x,y);
        else ctx.lineTo(x,y);
        
        // Draw points
        ctx.fillStyle = "#4de1a1";
        ctx.beginPath();
        ctx.arc(x,y,4,0,Math.PI*2);
        ctx.fill();
    });
    
    ctx.stroke();
    
    // Add labels
    ctx.fillStyle = "#0b7d53";
    ctx.font = "12px Raleway";
    ctx.textAlign = "center";
    
    // X axis labels (years)
    popData.forEach((d,i)=>{
        const x = pad + i*( (w-pad*2)/(popData.length-1) );
        ctx.fillText(d.year, x, h-pad+20);
    });
    
    // Y axis labels (population)
    for(let i = 0; i <= 5; i++) {
        const value = min + (max-min) * (i/5);
        const y = pad + (h-pad*2) * (i/5);
        ctx.fillText(Math.round(value).toLocaleString('ro-RO'), pad-30, y+4);
    }
}

/* ===================================================== */
/* ================= PIRAMIDA POP. ===================== */
/* ===================================================== */
function drawPyramid(year) {
    const svg = document.getElementById("pyramid");
    if (!svg) return;
    
    svg.innerHTML = "";
    const W = svg.clientWidth || 400;
    const H = svg.clientHeight || 300;
    
    const data = ageSeries[year];
    const total = data.reduce((s,x)=>s+x.m+x.f,0);
    const rowH = (H-40)/data.length;
    const maxBar = W/2 - 80;
    const center = W/2;
    
    // Add title
    const title = document.createElementNS("http://www.w3.org/2000/svg","text");
    title.textContent = `tabelul de vÃ¢rstÄƒ - ${year}`;
    title.setAttribute("x", center);
    title.setAttribute("y", 20);
    title.setAttribute("text-anchor", "middle");
    title.setAttribute("font-size", "14");
    title.setAttribute("font-weight", "bold");
    title.setAttribute("fill", "#0b7d53");
    svg.appendChild(title);
    
    // Add male/female labels
    const maleLabel = document.createElementNS("http://www.w3.org/2000/svg","text");
    maleLabel.textContent = "BÄƒrbaÈ›i";
    maleLabel.setAttribute("x", center - 40);
    maleLabel.setAttribute("y", 35);
    maleLabel.setAttribute("text-anchor", "middle");
    maleLabel.setAttribute("font-size", "12");
    maleLabel.setAttribute("fill", "#0b7d53");
    svg.appendChild(maleLabel);
    
    const femaleLabel = document.createElementNS("http://www.w3.org/2000/svg","text");
    femaleLabel.textContent = "Femei";
    femaleLabel.setAttribute("x", center + 40);
    femaleLabel.setAttribute("y", 35);
    femaleLabel.setAttribute("text-anchor", "middle");
    femaleLabel.setAttribute("font-size", "12");
    femaleLabel.setAttribute("fill", "#4de1a1");
    svg.appendChild(femaleLabel);
    
    // Draw pyramid bars
    data.forEach((g,i)=>{
        const y = 40 + i*rowH;
        const wM = (g.m/total)*maxBar;
        const wF = (g.f/total)*maxBar;
        
        // Male bar
        const rectM = document.createElementNS("http://www.w3.org/2000/svg","rect");
        rectM.setAttribute("x", center - wM);
        rectM.setAttribute("y", y);
        rectM.setAttribute("width", wM);
        rectM.setAttribute("height", rowH - 6);
        rectM.setAttribute("fill", "#0fa16d");
        rectM.setAttribute("stroke", "#0b7d53");
        rectM.setAttribute("stroke-width", "1");
        svg.appendChild(rectM);
        
        // Female bar
        const rectF = document.createElementNS("http://www.w3.org/2000/svg","rect");
        rectF.setAttribute("x", center);
        rectF.setAttribute("y", y);
        rectF.setAttribute("width", wF);
        rectF.setAttribute("height", rowH - 6);
        rectF.setAttribute("fill", "#4de1a1");
        rectF.setAttribute("stroke", "#0b7d53");
        rectF.setAttribute("stroke-width", "1");
        svg.appendChild(rectF);
        
        // Age group label
        const label = document.createElementNS("http://www.w3.org/2000/svg","text");
        label.textContent = g.group;
        label.setAttribute("x", center);
        label.setAttribute("y", y + rowH/2 + 4);
        label.setAttribute("text-anchor", "middle");
        label.setAttribute("font-size", "12");
        label.setAttribute("fill", "#1b2b23");
        svg.appendChild(label);
        
        // Male count
        const maleCount = document.createElementNS("http://www.w3.org/2000/svg","text");
        maleCount.textContent = g.m;
        maleCount.setAttribute("x", center - wM - 5);
        maleCount.setAttribute("y", y + rowH/2 + 4);
        maleCount.setAttribute("text-anchor", "end");
        maleCount.setAttribute("font-size", "11");
        maleCount.setAttribute("fill", "#0b7d53");
        svg.appendChild(maleCount);
        
        // Female count
        const femaleCount = document.createElementNS("http://www.w3.org/2000/svg","text");
        femaleCount.textContent = g.f;
        femaleCount.setAttribute("x", center + wF + 25);
        femaleCount.setAttribute("y", y + rowH/2 + 4);
        femaleCount.setAttribute("text-anchor", "start");
        femaleCount.setAttribute("font-size", "11");
        femaleCount.setAttribute("fill", "#0b7d53");
        svg.appendChild(femaleCount);
    });
}

/* ===================================================== */
/* ==================== NAVIGARE ======================= */
/* ===================================================== */
function showSection(id) {
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    
    if(id === "dinamica") {
        drawPopChart();
    }
    if(id === "varste") {
        const selectedYear = document.getElementById("ageYear").value;
        drawPyramid(selectedYear);
    }
}

/* ===================================================== */
/* ==================== INIT APP ======================= */
/* ===================================================== */
document.addEventListener("DOMContentLoaded", ()=>{
    // Fill tables
    fillPop();
    fillNat();
    fillMig();
    fillEth();
    fillAgeTable();
    
    // Initialize pyramid
    const ageYearSelect = document.getElementById("ageYear");
    ageYearSelect.addEventListener("change", () => {
        drawPyramid(ageYearSelect.value);
    });
    
    // Draw initial charts
    drawPopChart();
    drawPyramid("2016");
    
    // Add resize listener for responsive charts
    window.addEventListener("resize", () => {
        if(document.getElementById("dinamica").classList.contains("active")) {
            drawPopChart();
        }
        if(document.getElementById("varste").classList.contains("active")) {
            drawPyramid(document.getElementById("ageYear").value);
        }
    });
});
</script>
</body>
</html>
